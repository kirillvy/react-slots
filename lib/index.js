!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("slottr",["react"],t):"object"==typeof exports?exports.slottr=t(require("react")):e.slottr=t(e.react)}(window,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(t,o){t.exports=e},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(0));class l extends Map{constructor(e){if(super(),this.lastIndex=-1,this.scopeChildren=()=>this.children,this.injectElement=e=>{let t="string";if(r.default.isValidElement(e)&&void 0!==e.type){const o=e.type;t=o.hasOwnProperty("displayName")?o.displayName||"string":o,o.hasOwnProperty("displaySymbol")&&(t=o.displaySymbol)}const o=this.get(t),n=this.pushLastIndex();void 0===o?this.set(t,[{index:n,child:e}]):(o.push({index:n,child:e}),this.set(t,o))},this.includes=(...e)=>e.every(this.evalSlot(!0)),this.includeSlots=e=>e.reduce(this.filterSlot(),[]),this.excludeSlots=(e,t)=>{const o=[],n=l.reduceConds(e);return this.forEach((e,r)=>{if("symbol"!=typeof r&&!0!==t)return;const l=n[r];l?this.filterSlot(!0)(o,l):o.push(...e)}),o},this.nonSlotted=()=>{const e=[];return this.forEach((t,o)=>{"symbol"!=typeof o&&e.push(...t)}),e},this.pushLastIndex=()=>(this.lastIndex+=1,this.lastIndex),this.filterSlot=e=>(t,o)=>{if(l.isConditionsComponent(o)){const{slot:n,test:r}=o,l=this.get(n.displaySymbol);return void 0!==l&&(e?t.push(...l.filter(e=>!r(e.child.props))):t.push(...l.filter(e=>r(e.child.props)))),t}const n=this.get(o.displaySymbol);return void 0!==n&&!0!==e&&t.push(...n),t},this.evalSlot=e=>t=>{if(l.isConditionsComponent(t)){const{slot:o,test:n}=t,r=this.get(o.displaySymbol);return e?void 0!==r&&!0===r.every(e=>n(e.child.props)):void 0!==r&&!0===r.some(e=>n(e.child.props))}return this.has(t.displaySymbol)},!e)return;const t=e=>e.reduce((e,o)=>(o instanceof Array&&o.length?e.push(...t(o)):e.push(o),e),[]);this.children=t([e]);const o=r.default.Children.count(this.children);1===o?this.injectElement(this.children):o>1&&r.default.Children.forEach(e,this.injectElement)}static sortElements(e){return e.sort((e,t)=>e.index-t.index).map(e=>e.child)}static mapElements(e){return e.map(e=>e.child)}excludes(...e){return!e.some(this.evalSlot())}}l.isConditionsComponent=e=>void 0!==e.test,l.reduceConds=e=>e.reduce((e,t)=>{return e[l.isConditionsComponent(t)?t.slot.displaySymbol:t.displaySymbol]=t,e},{}),t.ScopeMap=l;t.default=e=>{if(e instanceof l)return e;if(void 0===e||0===e.length)return new l;return new l(e)}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(0)),i=l(o(1));t.injectSlot=(e,t)=>(o,n)=>{const{children:r,defaultProps:l,passedProps:c,withContext:a,props:u,childIs:d}=t;if(!0===a&&void 0!==r){if("fallback"===d)return null;if(void 0===e.Context.Provider)return null;const t=s.cloneElement(o,Object.assign({},u,c));return s.cloneElement(o,Object.assign({key:n},u,c),s.createElement(e.Context.Provider,{key:n,value:i.default(t.props.children)},r))}const p=o.props;return void 0===o.props?o:p.hasOwnProperty("children")?s.cloneElement(o,Object.assign({key:n},u,c)):s.cloneElement(o,Object.assign({key:n},u,l,c),r)};const c=(e=s.Fragment,t)=>o=>{var{children:r,renderAs:l,renderIn:i,renderInProps:c}=o,a=n(o,["children","renderAs","renderIn","renderInProps"]);const u=s.createElement(l||e,a,r);return t&&!1!==i?s.createElement(t,c,u):i?s.createElement(i,c,u):u},a=(e=s.Fragment,o)=>{const r=c(e,o);return r.Context=s.createContext(null),r.displaySymbol=Symbol(),r.Before=c(),r.Before.displaySymbol=Symbol(),r.After=c(),r.After.displaySymbol=Symbol(),r.Slot=(e=>o=>{const{scope:n,children:r,multiple:l=!1,fallback:c,fallbackProps:a,childIs:u,test:d,noHeaders:p}=o,f=i.default(n),y=f.get(e.displaySymbol),m=f.get(e.Before.displaySymbol)||[],h=f.get(e.After.displaySymbol)||[],b=m.map(e=>e.child),S=h.map(e=>e.child);if(void 0===y)return"fallback"!==u&&"both"!==u||void 0===r?void 0!==c?s.cloneElement(c,a):s.createElement(s.Fragment,null,b,S):s.cloneElement(r,a);if(!0===l){let n=y.reduce((n,{index:r,child:l})=>{const s=t.injectSlot(e,o)(l,r);return null!==s&&n.push(s),n},[]);return void 0!==d&&(n=n.filter(e=>d(e.props))),s.createElement(s.Fragment,null,b,n,S)}const{child:v}=y[0],O=t.injectSlot(e,o)(v);return p&&null===O?O:s.createElement(s.Fragment,null,b,O,S)})(r),r.Slot.displaySymbol=Symbol(),r.SubSlot=(e=>t=>{var{scope:o}=t,r=n(t,["scope"]);return s.createElement(o.Consumer,null,t=>s.createElement(e.Slot,Object.assign({},r,{scope:t})))})(r),r.SubSlot.displaySymbol=Symbol(),"string"!=typeof e&&(r.defaultProps=e.defaultProps,r.contextTypes=e.contextTypes),r.Slot.displayName="Subcomponent.Slot",r.displayName="Subcomponent.SlottedElement",r.SubSlot.displayName="Subcomponent.SubSlot",r};t.default=a,t.createLayeredSlot=(e=s.Fragment,t)=>{const o=a(e,t);return o.Slot=a(o.Slot),o}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(0)),i=l(o(1)),c=e=>t=>{var{scope:o}=t,r=n(t,["scope"]);return s.default.createElement(o.Consumer,null,t=>s.default.createElement(e,Object.assign({},r,{scope:t})))},a=Symbol(),u=Symbol(),d=Symbol(),p=Symbol(),f=({scope:e,excludes:t,includes:o,condition:n})=>{const r=i.default(e),l=!e||!o||r.includes(...o),s=!e||!t||r.excludes(...t),c=void 0===n||Boolean(n);return l&&s&&c};function y(e=s.default.Fragment,t=u,o){function r(t){const{children:l,scope:c,excludes:a,includes:u,condition:d}=t,p=n(t,["children","scope","excludes","includes","condition"]),y=e===s.default.Fragment?{}:Object.assign({scope:c},p),m=i.default(l),h=void 0!==o||f({scope:c,excludes:a,includes:u,condition:d}),b=m.get(r.displaySymbol);let S=null,[v,O]=[!1,!1];if(void 0!==b)for(const e of b){const t=e.child,o=f(t.props);if(o&&(S=t),!1!==v||!1!==O||t.type.typeSymbol!==r.If.typeSymbol){if(t.type.typeSymbol!==r.ElseIf.typeSymbol){if(t.type.typeSymbol===r.Else.typeSymbol){S=t;break}}else if(O=!0,o)break}else if(v=!0,o)break}if(h){const t=m.excludeSlots([r],!0);return v&&null!=S?s.default.createElement(e,y,i.ScopeMap.mapElements(t),S):s.default.createElement(e,y,i.ScopeMap.mapElements(t))}return null!==S&&!1===v?s.default.createElement(e,y,S):null}if(r.displaySymbol=a,r.typeSymbol=t,void 0===o){const e=y(s.default.Fragment,u,r),t=y(s.default.Fragment,d,r),o=y(s.default.Fragment,p,r);r.If=e,r.ElseIf=t,r.Else=o,r.SubSlot=c(r)}else setTimeout(()=>{r.If=o.If,r.ElseIf=o.Else,r.Else=o.ElseIf,r.SubSlot=c(o)},0);return r}t.createDefaultConditionalSlot=y;const m=y();t.default=m,t.createConditionalElement=e=>y(e,u)},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const l=n(o(1));t.useScope=l.default;const s=r(o(2));t.createSlot=s.default,t.default=s.default,t.createLayeredSlot=s.createLayeredSlot;const i=r(o(3));t.ConditionalSlot=i.default,t.createConditionalElement=i.createConditionalElement;const c=n(o(5));t.createConditionalSlot=c.default;const a=n(o(6));t.FilterSlot=a.default;const u=n(o(7));t.CompositionSlot=u.default},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(o(0)),s=r(o(2)),i=o(3);t.default=(e=l.default.Fragment)=>{const t=s.default(e);return t.Slot.Conditional=i.createDefaultConditionalSlot(t.Slot),t.SubSlot.Conditional=(e=>t=>{var{scope:o}=t,r=n(t,["scope"]);return l.default.createElement(o.Consumer,null,t=>l.default.createElement(e.Slot.Conditional,Object.assign({},r,{scope:t})))})(t),t.Before.Conditional=i.createDefaultConditionalSlot(t.Before),t.Before.Conditional.displaySymbol=t.Before.displaySymbol,t.After.Conditional=i.createDefaultConditionalSlot(t.After),t.After.Conditional.displaySymbol=t.After.displaySymbol,t}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const l=r(o(0)),s=r(o(1));t.createFilterSlot=(e=l.Fragment)=>{const t=({scope:t,exclude:o,include:n,grouped:r,all:i})=>{if(!0===r){const r=s.default(t);let c=[];o?c=r.excludeSlots(o,i):n&&(c=r.includeSlots(n),i&&c.push(...r.nonSlotted()));const a=s.ScopeMap.mapElements(c);return l.createElement(e,{},a)}let c=t;const a=[];t instanceof s.ScopeMap&&(c=t.scopeChildren());const u=n&&s.ScopeMap.reduceConds(n),d=o&&s.ScopeMap.reduceConds(o),p=e=>{const t=(t,o)=>{if(void 0!==t)return s.ScopeMap.isConditionsComponent(t)?t.test(e.props)===o?a.push(e):void 0:void(o&&a.push(e))};(e=>e&&e.type&&e.type.displaySymbol)(e)?d?t(d[e.type.displaySymbol],!1):u&&t(u[e.type.displaySymbol],!0):i&&a.push(e)},f=l.Children.count(c);return 1===f?p(c):f>1&&l.Children.forEach(c,p),l.createElement(e,{},a)};return t.SubSlot=(e=>t=>{var{scope:o}=t,r=n(t,["scope"]);return l.createElement(o.Consumer,null,t=>l.createElement(e,Object.assign({},r,{scope:t})))})(t),t};const i=t.createFilterSlot();t.default=i},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const l=r(o(0)),s=o(2),i=o(1),c=((e=l.Fragment)=>{const t=({scope:t,all:o,children:n})=>{const r=(Array.isArray(n)?n:[n]).reduce((e,t)=>(t.type&&t.type.displaySymbol&&(e[t.type.displaySymbol]||(e[t.type.displaySymbol]=[]),e[t.type.displaySymbol].push(t)),e),{}),c=[],a=(e,t)=>{if((e=>e&&e.type&&e.type.displaySymbol)(e)&&e.type&&e.type.Slot){const o=r[e.type.Slot.displaySymbol];if(o)for(const n of o){const o=s.injectSlot(e.type,n.props)(e,t);o&&c.push(o)}}else o&&c.push(e)};let u=t;t instanceof i.ScopeMap&&(u=t.scopeChildren());const d=l.Children.count(u);return 1===d?a(u):d>1&&l.Children.forEach(u,a),l.createElement(e,{},c)};return t.SubSlot=(e=>t=>{var{scope:o}=t,r=n(t,["scope"]);return l.createElement(o.Consumer,null,t=>l.createElement(e,Object.assign({},r,{scope:t})))})(t),t})();t.default=c}])}));
//# sourceMappingURL=index.js.map