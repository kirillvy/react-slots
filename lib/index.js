!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("slottr",["react"],t):"object"==typeof exports?exports.slottr=t(require("react")):e.slottr=t(e.react)}(window,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(n,l,function(t){return e[t]}.bind(null,l));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(t,o){t.exports=e},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=n(o(0));class r extends Map{constructor(e){if(super(),this.lastIndex=-1,this.scopeChildren=()=>this.children,this.injectElement=e=>{let t="string";if(l.default.isValidElement(e)&&void 0!==e.type){const o=e.type;t=o.hasOwnProperty("displaySymbol")?o.displaySymbol:o.hasOwnProperty("displayName")?o.displayName||"string":o}const o=this.get(t),n=this.pushLastIndex();void 0===o?this.set(t,[{index:n,child:e}]):(o.push({index:n,child:e}),this.set(t,o))},this.includes=(...e)=>e.every(this.evalSlot(!0)),this.includeSlots=e=>e.reduce(this.filterSlot(),[]),this.excludeSlots=(e,t)=>{const o=[],n=r.reduceConds(e);return this.forEach((e,l)=>{if("symbol"!=typeof l&&!0!==t)return;const r=n[l];r?this.filterSlot(!0)(o,r):o.push(...e)}),o},this.nonSlotted=()=>{const e=[];return this.forEach((t,o)=>{"symbol"!=typeof o&&e.push(...t)}),e},this.pushLastIndex=()=>(this.lastIndex+=1,this.lastIndex),this.filterSlot=e=>(t,o)=>{if(r.isConditionsComponent(o)){const{slot:n,test:l}=o,r=this.get(n.displaySymbol);return void 0!==r&&(e?t.push(...r.filter(e=>!l(e.child.props))):t.push(...r.filter(e=>l(e.child.props)))),t}const n=this.get(o.displaySymbol);return void 0!==n&&!0!==e&&t.push(...n),t},this.evalSlot=e=>t=>{if(r.isConditionsComponent(t)){const{slot:o,test:n}=t,l=this.get(o.displaySymbol);return e?void 0!==l&&!0===l.every(e=>n(e.child.props)):void 0!==l&&!0===l.some(e=>n(e.child.props))}return this.has(t.displaySymbol)},!e)return;const t=e=>e.reduce((e,o)=>(o instanceof Array&&o.length?e.push(...t(o)):e.push(o),e),[]);this.children=t([e]),l.default.Children.forEach(e,this.injectElement)}static sortElements(e){return e.sort((e,t)=>e.index-t.index).map(e=>e.child)}static mapElements(e){return e.map(e=>e.child)}excludes(...e){return!e.some(this.evalSlot())}}t.ScopeMap=r,r.isConditionsComponent=e=>void 0!==e.test,r.reduceConds=e=>e.reduce((e,t)=>{return e[r.isConditionsComponent(t)?t.slot.displaySymbol:t.displaySymbol]=t,e},{});t.default=e=>{if(e instanceof r)return e;if(void 0===e||0===e.length)return new r;return new r(e)}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=l(o(0)),i=r(o(1));t.injectSlot=(e,t)=>(o,n)=>{const{children:l,defaultProps:r,passedProps:c,withContext:a,props:u,childIs:d}=t;if(!0===a&&void 0!==l){if("fallback"===d)return null;if(void 0===e.Context.Provider)return null;const t=s.cloneElement(o,Object.assign(Object.assign({},u),c));return s.cloneElement(o,Object.assign(Object.assign({key:n},u),c),s.cloneElement(e.ContextProvider,{key:n,value:i.default(t.props.children)},l))}const p=o.props;return void 0===o.props?o:p.hasOwnProperty("children")?s.cloneElement(o,Object.assign(Object.assign({key:n},u),c)):s.cloneElement(o,Object.assign(Object.assign(Object.assign({key:n},u),r),c),l)};const c=(e=s.Fragment,t)=>{const o=s.createElement(e),l=t?s.createElement(t):void 0;return e=>{var{children:t,renderAs:r,renderIn:i,renderInProps:c}=e,a=n(e,["children","renderAs","renderIn","renderInProps"]);const u=r?s.createElement(r,a,t):s.cloneElement(o,a,t);return i?s.createElement(i,c,u):l&&!1!==i?s.cloneElement(l,c,u):u}},a=(e=s.Fragment,o)=>{const l=c(e,o);return l.Context=s.createContext(null),l.ContextProvider=s.createElement(l.Context.Provider),l.displaySymbol=Symbol(),l.Before=c(),l.Before.displaySymbol=Symbol(),l.After=c(),l.After.displaySymbol=Symbol(),l.Slot=(e=>o=>{const{scope:n,children:l,multiple:r=!1,fallback:c,fallbackProps:a,childIs:u,test:d,noHeaders:p}=o,f=i.default(n),y=f.get(e.displaySymbol),m=f.get(e.Before.displaySymbol)||[],b=f.get(e.After.displaySymbol)||[],S=m.map(e=>e.child),h=b.map(e=>e.child);if(void 0===y)return"fallback"!==u&&"both"!==u||void 0===l?c?s.cloneElement(c,a):s.createElement(s.Fragment,null,S,h):s.cloneElement(l,a);if(!0===r){let n=y.reduce((n,{index:l,child:r})=>{const s=t.injectSlot(e,o)(r,l);return null!==s&&n.push(s),n},[]);return void 0!==d&&(n=n.filter(e=>d(e.props))),s.createElement(s.Fragment,null,S,n,h)}const{child:O}=y[0],v=t.injectSlot(e,o)(O);return p&&null===v?v:s.createElement(s.Fragment,null,S,v,h)})(l),l.Slot.displaySymbol=Symbol(),l.SubSlot=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);const r=s.useContext(o);return e.Slot(Object.assign(Object.assign({},l),{scope:r}))})(l),l.SubSlot.displaySymbol=Symbol(),"string"!=typeof e&&(l.defaultProps=e.defaultProps,l.contextTypes=e.contextTypes),l.Slot.displayName="Subcomponent.Slot",l.displayName="Subcomponent.SlottedElement",l.SubSlot.displayName="Subcomponent.SubSlot",l};t.default=a,t.createLayeredSlot=(e=s.Fragment,t)=>{const o=a(e,t);return o.Slot=a(o.Slot),o}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=l(o(0)),i=r(o(1)),c=e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return s.default.createElement(o.Consumer,null,t=>s.default.createElement(e,Object.assign({},l,{scope:t})))},a=Symbol(),u=Symbol(),d=Symbol(),p=Symbol(),f=({scope:e,excludes:t,includes:o,condition:n})=>{const l=i.default(e),r=!e||!o||l.includes(...o),s=!e||!t||l.excludes(...t),c=void 0===n||Boolean(n);return r&&s&&c};function y(e=s.default.Fragment,t=u,o){const l=s.default.createElement(e);function r(t){const{children:c,scope:a,excludes:u,includes:d,condition:p}=t,y=n(t,["children","scope","excludes","includes","condition"]),m=e===s.default.Fragment?{}:Object.assign({scope:a},y),b=i.default(c),S=void 0!==o||f({scope:a,excludes:u,includes:d,condition:p}),h=b.get(r.displaySymbol);let O=null,[v,_]=[!1,!1];if(void 0!==h)for(const e of h){const t=e.child,o=f(t.props);if(o&&(O=t),!1!==v||!1!==_||t.type.typeSymbol!==r.If.typeSymbol){if(t.type.typeSymbol!==r.ElseIf.typeSymbol){if(t.type.typeSymbol===r.Else.typeSymbol){O=t;break}}else if(_=!0,o)break}else if(v=!0,o)break}if(S){const e=b.excludeSlots([r],!0);return v&&null!=O?s.default.cloneElement(l,m,i.ScopeMap.mapElements(e),O):s.default.cloneElement(l,m,i.ScopeMap.mapElements(e))}return null!==O&&!1===v?s.default.cloneElement(l,m,O):null}if(r.displaySymbol=a,r.typeSymbol=t,void 0===o){const e=y(s.default.Fragment,u,r),t=y(s.default.Fragment,d,r),o=y(s.default.Fragment,p,r);r.If=e,r.ElseIf=t,r.Else=o,r.SubSlot=c(r)}else setTimeout(()=>{r.If=o.If,r.ElseIf=o.Else,r.Else=o.ElseIf,r.SubSlot=c(o)},0);return r}t.createDefaultConditionalSlot=y;const m=y();t.default=m,t.createConditionalElement=e=>y(e,u)},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(1));t.useScope=r.default;const s=l(o(2));t.createSlot=s.default,t.default=s.default,t.createLayeredSlot=s.createLayeredSlot;const i=l(o(3));t.ConditionalSlot=i.default,t.createConditionalElement=i.createConditionalElement;const c=n(o(5));t.createConditionalSlot=c.default;const a=n(o(6));t.FilterSlot=a.default;const u=n(o(7));t.CompositionSlot=u.default},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=l(o(0)),s=l(o(2)),i=o(3);t.default=(e=r.default.Fragment)=>{const t=s.default(e);return t.Slot.Conditional=i.createDefaultConditionalSlot(t.Slot),t.SubSlot.Conditional=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return r.default.createElement(o.Consumer,null,t=>r.default.createElement(e.Slot.Conditional,Object.assign({},l,{scope:t})))})(t),t.Before.Conditional=i.createDefaultConditionalSlot(t.Before),t.Before.Conditional.displaySymbol=t.Before.displaySymbol,t.After.Conditional=i.createDefaultConditionalSlot(t.After),t.After.Conditional.displaySymbol=t.After.displaySymbol,t}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=l(o(0)),s=l(o(1));t.createFilterSlot=(e=r.Fragment)=>{const t=r.createElement(e),o=({scope:e,exclude:o,include:n,grouped:l,all:i})=>{if(!0===l){const l=s.default(e);let c=[];o?c=l.excludeSlots(o,i):n&&(c=l.includeSlots(n),i&&c.push(...l.nonSlotted()));const a=s.ScopeMap.mapElements(c);return r.cloneElement(t,{},a)}let c=e;const a=[];e instanceof s.ScopeMap&&(c=e.scopeChildren());const u=n&&s.ScopeMap.reduceConds(n),d=o&&s.ScopeMap.reduceConds(o),p=e=>{const t=(t,o)=>{if(void 0!==t)return s.ScopeMap.isConditionsComponent(t)?t.test(e.props)===o?a.push(e):void 0:void(o&&a.push(e))};(e=>e&&e.type&&e.type.displaySymbol)(e)?d?t(d[e.type.displaySymbol],!1):u&&t(u[e.type.displaySymbol],!0):i&&a.push(e)},f=r.Children.count(c);return 1===f?p(c):f>1&&r.Children.forEach(c,p),r.cloneElement(t,{},a)};return o.SubSlot=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return r.createElement(o.Consumer,null,t=>r.createElement(e,Object.assign({},l,{scope:t})))})(o),o};const i=t.createFilterSlot();t.default=i},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=l(o(0)),s=o(2),i=o(1),c=((e=r.Fragment)=>{const t=r.createElement(e),o=({scope:e,all:o,children:n})=>{const l=(Array.isArray(n)?n:[n]).reduce((e,t)=>(t.type&&t.type.displaySymbol&&(e[t.type.displaySymbol]||(e[t.type.displaySymbol]=[]),e[t.type.displaySymbol].push(t)),e),{}),c=[],a=(e,t)=>{if((e=>e&&e.type&&e.type.displaySymbol)(e)&&e.type&&e.type.Slot){const o=l[e.type.Slot.displaySymbol];if(o)for(const n of o){const o=s.injectSlot(e.type,n.props)(e,t);o&&c.push(o)}}else o&&c.push(e)};let u=e;e instanceof i.ScopeMap&&(u=e.scopeChildren());const d=r.Children.count(u);return 1===d?a(u):d>1&&r.Children.forEach(u,a),r.cloneElement(t,{},c)};return o.SubSlot=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return r.createElement(o.Consumer,null,t=>r.createElement(e,Object.assign({},l,{scope:t})))})(o),o})();t.default=c}])}));
//# sourceMappingURL=index.js.map