!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("slottr",["react"],t):"object"==typeof exports?exports.slottr=t(require("react")):e.slottr=t(e.react)}(window,(function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(n,l,function(t){return e[t]}.bind(null,l));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=5)}([function(t,o){t.exports=e},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=n(o(0)),r=n(o(2));class s extends Map{constructor(e){if(super(),this.lastIndex=-1,this.scopeChildren=()=>this.children,this.injectElement=e=>{let t="string";if(l.default.isValidElement(e)&&void 0!==e.type){const o=e.type;t=o.hasOwnProperty("displayName")?o.displayName||"string":o,o.hasOwnProperty("displaySymbol")&&(t=o.displaySymbol)}const o=this.get(t),n=this.pushLastIndex();void 0===o?this.set(t,[{index:n,child:e}]):(o.push({index:n,child:e}),this.set(t,o))},this.includes=(...e)=>e.every(this.evalSlot(!0)),this.includeSlots=e=>e.reduce(this.filterSlot(),[]),this.excludeSlots=(e,t)=>{const o=[],n=r.default.reduceConds(e);return this.forEach((e,l)=>{if("symbol"!=typeof l&&!0!==t)return;const r=n[l];r?this.filterSlot(!0)(o,r):o.push(...e)}),o},this.nonSlotted=()=>{const e=[];return this.forEach((t,o)=>{"symbol"!=typeof o&&e.push(...t)}),e},this.pushLastIndex=()=>(this.lastIndex+=1,this.lastIndex),this.filterSlot=e=>(t,o)=>{if(r.default.isConditionsComponent(o)){const{slot:n,test:l}=o,r=this.get(n.displaySymbol);return void 0!==r&&(e?t.push(...r.filter(e=>!l(e.child.props))):t.push(...r.filter(e=>l(e.child.props)))),t}const n=this.get(o.displaySymbol);return void 0!==n&&!0!==e&&t.push(...n),t},this.evalSlot=e=>t=>{if(r.default.isConditionsComponent(t)){const{slot:o,test:n}=t,l=this.get(o.displaySymbol);return e?void 0!==l&&!0===l.every(e=>n(e.child.props)):void 0!==l&&!0===l.some(e=>n(e.child.props))}return this.has(t.displaySymbol)},!e)return;const t=e=>e.reduce((e,o)=>(o instanceof Array&&o.length?e.push(...t(o)):e.push(o),e),[]);this.children=t([e]);const o=l.default.Children.count(this.children);1===o?this.injectElement(this.children):o>1&&l.default.Children.forEach(e,this.injectElement)}excludes(...e){return!e.some(this.evalSlot())}}t.ScopeMap=s;t.default=e=>{if(e instanceof s)return e;if(void 0===e||0===e.length)return new s;return new s(e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{static sortElements(e){return e.sort((e,t)=>e.index-t.index).map(e=>e.child)}static mapElements(e){return e.map(e=>e.child)}}n.isConditionsComponent=e=>void 0!==e.test,n.reduceConds=e=>e.reduce((e,t)=>{return e[n.isConditionsComponent(t)?t.slot.displaySymbol:t.displaySymbol]=t,e},{}),t.ScopeUtils=n,t.default=n},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=l(o(0)),i=r(o(1));t.injectSlot=(e,t)=>(o,n)=>{const{children:l,defaultProps:r,passedProps:a,withContext:c,props:u,childIs:d}=t;if(!0===c&&void 0!==l){if("fallback"===d)return null;if(void 0===e.Context.Provider)return null;const t=s.cloneElement(o,Object.assign({},u,a));return s.cloneElement(o,Object.assign({key:n},u,a),s.createElement(e.Context.Provider,{key:n,value:i.default(t.props.children)},l))}const p=o.props;return void 0===o.props?o:p.hasOwnProperty("children")?s.cloneElement(o,Object.assign({key:n},u,a)):s.cloneElement(o,Object.assign({key:n},u,r,a),l)};const a=(e=s.Fragment,t)=>o=>{var{children:l,renderAs:r,renderIn:i,renderInProps:a}=o,c=n(o,["children","renderAs","renderIn","renderInProps"]);const u=s.createElement(r||e,c,l);return t&&!1!==i?s.createElement(t,a,u):i?s.createElement(i,a,u):u},c=(e=s.Fragment,o)=>{const l=a(e,o);return l.Context=s.createContext(null),l.displaySymbol=Symbol(),l.Before=a(),l.Before.displaySymbol=Symbol(),l.After=a(),l.After.displaySymbol=Symbol(),l.Slot=(e=>o=>{const{scope:n,children:l,multiple:r=!1,fallback:a,fallbackProps:c,childIs:u,test:d,noHeaders:p}=o,f=i.default(n),y=f.get(e.displaySymbol),m=f.get(e.Before.displaySymbol)||[],h=f.get(e.After.displaySymbol)||[],b=m.map(e=>e.child),S=h.map(e=>e.child);if(void 0===y)return"fallback"!==u&&"both"!==u||void 0===l?void 0!==a?s.cloneElement(a,c):s.createElement(s.Fragment,null,b,S):s.cloneElement(l,c);if(!0===r){let n=y.reduce((n,{index:l,child:r})=>{const s=t.injectSlot(e,o)(r,l);return null!==s&&n.push(s),n},[]);return void 0!==d&&(n=n.filter(e=>d(e.props))),s.createElement(s.Fragment,null,b,n,S)}const{child:v}=y[0],O=t.injectSlot(e,o)(v);return p&&null===O?O:s.createElement(s.Fragment,null,b,O,S)})(l),l.Slot.displaySymbol=Symbol(),l.SubSlot=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return s.createElement(o.Consumer,null,t=>s.createElement(e.Slot,Object.assign({},l,{scope:t})))})(l),l.SubSlot.displaySymbol=Symbol(),"string"!=typeof e&&(l.defaultProps=e.defaultProps,l.contextTypes=e.contextTypes),l.Slot.displayName="Subcomponent.Slot",l.displayName="Subcomponent.SlottedElement",l.SubSlot.displayName="Subcomponent.SubSlot",l};t.default=c,t.createLayeredSlot=(e=s.Fragment,t)=>{const o=c(e,t);return o.Slot=c(o.Slot),o}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=l(o(0)),s=l(o(1)),i=l(o(2)),a=e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return r.default.createElement(o.Consumer,null,t=>r.default.createElement(e,Object.assign({},l,{scope:t})))},c=Symbol(),u=Symbol(),d=Symbol(),p=Symbol(),f=({scope:e,excludes:t,includes:o,condition:n})=>{const l=s.default(e),r=!e||!o||l.includes(...o),i=!e||!t||l.excludes(...t),a=void 0===n||Boolean(n);return r&&i&&a};function y(e=r.default.Fragment,t=u,o){function l(t){const{children:a,scope:c,excludes:u,includes:d,condition:p}=t,y=n(t,["children","scope","excludes","includes","condition"]),m=e===r.default.Fragment?{}:Object.assign({scope:c},y),h=s.default(a),b=void 0!==o||f({scope:c,excludes:u,includes:d,condition:p}),S=h.get(l.displaySymbol);let v=null,[O,_]=[!1,!1];if(void 0!==S)for(let e=0;e<S.length;e++){const t=S[e].child,o=f(t.props);if(o&&(v=t),!1!==O||!1!==_||t.type.typeSymbol!==l.If.typeSymbol){if(t.type.typeSymbol!==l.ElseIf.typeSymbol){if(t.type.typeSymbol===l.Else.typeSymbol){v=t;break}}else if(_=!0,o)break}else if(O=!0,o)break}if(b){const t=h.excludeSlots([l],!0);return O&&null!=v?r.default.createElement(e,m,i.default.mapElements(t),v):r.default.createElement(e,m,i.default.mapElements(t))}return null!==v&&!1===O?r.default.createElement(e,m,v):null}if(l.displaySymbol=c,l.typeSymbol=t,void 0===o){const e=y(r.default.Fragment,u,l),t=y(r.default.Fragment,d,l),o=y(r.default.Fragment,p,l);l.If=e,l.ElseIf=t,l.Else=o,l.SubSlot=a(l)}else setTimeout(()=>{l.If=o.If,l.ElseIf=o.Else,l.Else=o.ElseIf,l.SubSlot=a(o)},0);return l}t.createDefaultConditionalSlot=y;const m=y();t.default=m,t.createConditionalElement=e=>y(e,u)},function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=n(o(1));t.useScope=r.default;const s=l(o(3));t.createSlot=s.default,t.default=s.default,t.createLayeredSlot=s.createLayeredSlot;const i=n(o(6));t.createConditionalSlot=i.default;const a=l(o(4));t.ConditionalSlot=a.default,t.createConditionalElement=a.createConditionalElement;const c=n(o(7));t.FilterSlot=c.default;const u=n(o(8));t.CompositionSlot=u.default},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=l(o(0)),s=l(o(3)),i=o(4);t.default=(e=r.default.Fragment)=>{const t=s.default(e);return t.Slot.Conditional=i.createDefaultConditionalSlot(t.Slot),t.SubSlot.Conditional=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return r.default.createElement(o.Consumer,null,t=>r.default.createElement(e.Slot.Conditional,Object.assign({},l,{scope:t})))})(t),t.Before.Conditional=i.createDefaultConditionalSlot(t.Before),t.Before.Conditional.displaySymbol=t.Before.displaySymbol,t.After.Conditional=i.createDefaultConditionalSlot(t.After),t.After.Conditional.displaySymbol=t.After.displaySymbol,t}},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=l(o(0)),i=l(o(1)),a=r(o(2));t.createFilterSlot=(e=s.Fragment)=>{const t=({scope:t,exclude:o,include:n,grouped:l,all:r})=>{if(!0===l){const l=i.default(t);let c=[];o?c=l.excludeSlots(o,r):n&&(c=l.includeSlots(n),r&&c.push(...l.nonSlotted()));const u=a.default.mapElements(c);return s.createElement(e,{},u)}let c=t;const u=[];t instanceof i.ScopeMap&&(c=t.scopeChildren());const d=n&&a.default.reduceConds(n),p=o&&a.default.reduceConds(o),f=e=>{const t=(t,o)=>{if(void 0!==t)return a.default.isConditionsComponent(t)?t.test(e.props)===o?u.push(e):void 0:void(o&&u.push(e))};(e=>e&&e.type&&e.type.displaySymbol)(e)?p?t(p[e.type.displaySymbol],!1):d&&t(d[e.type.displaySymbol],!0):r&&u.push(e)},y=s.Children.count(c);return 1===y?f(c):y>1&&s.Children.forEach(c,f),s.createElement(e,{},u)};return t.SubSlot=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return s.createElement(o.Consumer,null,t=>s.createElement(e,Object.assign({},l,{scope:t})))})(t),t};const c=t.createFilterSlot();t.default=c},function(e,t,o){"use strict";var n=this&&this.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=l(o(0)),s=o(3),i=o(1),a=((e=r.Fragment)=>{const t=({scope:t,all:o,children:n})=>{const l=(Array.isArray(n)?n:[n]).reduce((e,t)=>(t.type&&t.type.displaySymbol&&(e[t.type.displaySymbol]||(e[t.type.displaySymbol]=[]),e[t.type.displaySymbol].push(t)),e),{}),a=[],c=(e,t)=>{if((e=>e&&e.type&&e.type.displaySymbol)(e)&&e.type&&e.type.Slot){const o=l[e.type.Slot.displaySymbol];if(o)for(let n=0;n<o.length;n++){const l=o[n],r=s.injectSlot(e.type,l.props)(e,t);r&&a.push(r)}}else o&&a.push(e)};let u=t;t instanceof i.ScopeMap&&(u=t.scopeChildren());const d=r.Children.count(u);return 1===d?c(u):d>1&&r.Children.forEach(u,c),r.createElement(e,{},a)};return t.SubSlot=(e=>t=>{var{scope:o}=t,l=n(t,["scope"]);return r.createElement(o.Consumer,null,t=>r.createElement(e,Object.assign({},l,{scope:t})))})(t),t})();t.default=a}])}));
//# sourceMappingURL=index.js.map