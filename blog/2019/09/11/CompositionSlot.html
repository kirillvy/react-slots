<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Introducing CompositionSlot · slottr</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="CompositionSlot is a method tailored for forms coming in slottr 0.4, which allows you to compose forms and process"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Introducing CompositionSlot · slottr"/><meta property="og:type" content="website"/><meta property="og:url" content="https://kirillvy.github.io/react-slots/blog/2019/09/11/CompositionSlot"/><meta property="og:description" content="CompositionSlot is a method tailored for forms coming in slottr 0.4, which allows you to compose forms and process"/><meta property="og:image" content="https://kirillvy.github.io/react-slots/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://kirillvy.github.io/react-slots/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-slots/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://kirillvy.github.io/react-slots/blog/atom.xml" title="slottr Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://kirillvy.github.io/react-slots/blog/feed.xml" title="slottr Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/react-slots/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-slots/css/main.css"/><script src="/react-slots/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-slots/"><img class="logo" src="/react-slots/img/favicon.ico" alt="slottr"/><h2 class="headerTitleWithLogo">slottr</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/react-slots/docs/doc1" target="_self">Docs</a></li><li class=""><a href="/react-slots/docs/doc4" target="_self">API</a></li><li class=""><a href="/react-slots/help" target="_self">Help</a></li><li class="siteNavGroupActive"><a href="/react-slots/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/react-slots/blog/2019/09/11/CompositionSlot">Introducing CompositionSlot</a></li><li class="navListItem"><a class="navItem" href="/react-slots/blog/2019/09/05/blog-post">Welcome to the blog!</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/react-slots/blog/2019/09/11/CompositionSlot">Introducing CompositionSlot</a></h1><p class="post-meta">September 11, 2019</p><div class="authorBlock"><p class="post-authorName"><a target="_blank" rel="noreferrer noopener">Kirill Vysokolov</a></p><div class="authorPhoto"><a target="_blank" rel="noreferrer noopener"><img src="https://graph.facebook.com/100003639822089/picture/?height=200&amp;width=200" alt="Kirill Vysokolov"/></a></div></div></header><div><span><p>CompositionSlot is a method tailored for forms coming in slottr 0.4, which allows you to compose forms and process
events inside the template.</p>
<p>To begin using the slot, import it:</p>
<p><code>import { CompositionSlot } from 'slottr';</code></p>
<p>You can also create your own with the method createCompositionSlot().</p>
<!--truncate-->
<p>Inside the CompositionSlot you can pass in the slots you want to see in the scope (including context with CompositionSlot.SubSlot).</p>
<p>Inside the <code>props</code> prop you can pass in event triggers to create events to process in the form.</p>
<pre><code class="hljs css language-tsx">&lt;CompositionSlot scope={scope}&gt;
  &lt;CardInput<span class="hljs-selector-class">.Slot</span>
    props={{onInput: (e) =&gt; console.log(e<span class="hljs-selector-class">.currentTarget</span><span class="hljs-selector-class">.value</span>, e<span class="hljs-selector-class">.currentTarget</span><span class="hljs-selector-class">.name</span>)}}
    scope={[]}
  /&gt;
  &lt;CardCheckBox<span class="hljs-selector-class">.Slot</span> 
    props={{onInput: (e) =&gt; console.log(e<span class="hljs-selector-class">.currentTarget</span><span class="hljs-selector-class">.checked</span>, e<span class="hljs-selector-class">.currentTarget</span><span class="hljs-selector-class">.name</span>)}}
    scope={[]}
  /&gt;
  &lt;CardContextCard<span class="hljs-selector-class">.Slot</span> scope={[]} withContext={true}&gt;
    &lt;CardLabel<span class="hljs-selector-class">.SubSlot</span> scope={CardContextCard.Context} /&gt;
    &lt;CardInput<span class="hljs-selector-class">.SubSlot</span>
      scope={CardContextCard.Context}
      props={{onInput: (e) =&gt; console.log(e<span class="hljs-selector-class">.currentTarget</span><span class="hljs-selector-class">.value</span>, e<span class="hljs-selector-class">.currentTarget</span><span class="hljs-selector-class">.name</span>)}}
    /&gt;
  &lt;/CardContextCard.Slot&gt;
&lt;/CompositionSlot&gt;
</code></pre>
<p>For simple components that use callbacks, you can also use Context:</p>
<pre><code class="hljs css language-tsx"><span class="xml">const CardInput = createSlot('input');

<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
  e.preventDefault();
  onSubmit(data);
}}&gt;
  <span class="hljs-tag">&lt;<span class="hljs-name">CompositionSlot</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">{scope}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ContextCard.Slot</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">{[]}</span> <span class="hljs-attr">withContext</span>=<span class="hljs-string">{true}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardLabel.SubSlot</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">{CardContextCard.Context}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardInput.SubSlot</span>
        <span class="hljs-attr">scope</span>=<span class="hljs-string">{CardContextCard.Context}</span>
        <span class="hljs-attr">props</span>=</span></span><span class="hljs-template-variable">{{onInput: (e) =&gt; console.<span class="hljs-builtin-name">log</span>(e.currentTarget.value, e.currentTarget.name)}}</span><span class="xml"><span class="hljs-tag">
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ContextCard.Slot</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">CompositionSlot</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</span></code></pre>
<p>On the top level, simply pass in the name, placeholder and other props you need.</p>
<pre><code class="hljs css language-tsx"><span class="hljs-tag">&lt;<span class="hljs-name">CompositionForm</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(data)</span> =&gt;</span> ...}&gt;
  <span class="hljs-tag">&lt;<span class="hljs-name">ContextCard</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CardLabel</span>&gt;</span>
      Name: <span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">Input</span> <span class="hljs-attr">your</span> <span class="hljs-attr">first</span> <span class="hljs-attr">and</span> <span class="hljs-attr">last</span> <span class="hljs-attr">name</span>'}&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">CardLabel</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CardInput</span>
      <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">name</span>'}
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">Enter</span> <span class="hljs-attr">name...</span>'}
      <span class="hljs-attr">required</span>=<span class="hljs-string">{true}</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ContextCard.Slot</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ContextCard</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CardLabel</span>&gt;</span>
      Email: <span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">Enter</span> <span class="hljs-attr">a</span> <span class="hljs-attr">valid</span> <span class="hljs-attr">email</span>'}&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">CardLabel</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CardInput</span>
      <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">email</span>'}
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">Enter</span> <span class="hljs-attr">email...</span>'}
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ContextCard.Slot</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CompositionSlot</span>&gt;</span>
</code></pre>
<p>In addition, I made the renderIn property for when you need to wrap a Slot component in a different component.
This is useful for simple elements that may require a variable wrapper, for example in a list.</p>
<p>You can designate a default render in by passing a second prop with the component or JSX default component name:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ContainedCard = createConditionalSlot(<span class="hljs-string">'div'</span>, Container);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ContainedSpan = createConditionalSlot(Element, <span class="hljs-string">'div'</span>);
</code></pre>
<p>To cancel the container, pass a <code>false</code> prop to renderIn:</p>
<pre><code class="hljs css language-tsx"><span class="hljs-tag">&lt;<span class="hljs-name">ContainedCard</span> <span class="hljs-attr">renderIn</span>=<span class="hljs-string">{false}</span> /&gt;</span>
</code></pre>
<p>In addition, any Slottable component can be passed a <code>renderIn</code> to make a container. It can be manipulated through
<code>renderInProps</code>:</p>
<pre><code class="hljs css language-tsx"><span class="hljs-tag">&lt;<span class="hljs-name">UnContainedCard</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">UnContainedCard</span> <span class="hljs-attr">renderIn</span>=<span class="hljs-string">{Container}</span> <span class="hljs-attr">renderInProps</span>=<span class="hljs-string">{{name:</span> '<span class="hljs-attr">Enter</span> <span class="hljs-attr">name:</span>'}} /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">UnContainedCard</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">UnContainedCard</span> /&gt;</span>
</code></pre>
<p>For complex labels that may require extension it's better to use withContext or design separate components that
propagate the input events through callbacks or to use withContext, if reusability is not needed.</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/react-slots/blog">Recent Posts</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/react-slots/" class="nav-home"><img src="/react-slots/img/favicon.ico" alt="slottr" width="66" height="58"/></a><div><h5>Docs</h5><a href="/react-slots/docs/en/doc1.html">Getting Started</a><a href="/react-slots/docs/en/doc2.html">Guides</a><a href="/react-slots/docs/en/doc4.html">API Reference</a></div><div><h5>Community</h5><span style="color:rgba(255, 255, 255, 0.6)">Coming soon...</span></div><div><h5>More</h5><a href="/react-slots/blog">Blog</a><a href="https://github.com/kirillvy/react-slots">GitHub</a><a class="github-button" href="https://github.com/kirillvy/react-slots" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 kirillvy</section></footer></div></body></html>